---
import Card from "@components/card.astro";
import Day from "@components/day.astro";

import webdev from "@data/quicklinks/webdev.json";
import personal from "@data/quicklinks/personal.json";
import school from "@data/quicklinks/school.json";

import writ340 from "@data/classes/writ340.json";
import naut301 from "@data/classes/naut301.json";
import ee557 from "@data/classes/ee557.json";
import ee511 from "@data/classes/ee511.json";
import csci431 from "@data/classes/csci431.json";

const quicklinks = [
  ["Web Dev", webdev],
  ["Personal", personal],
  ["School", school],
];

const mon = [
  [writ340, "lecture"],
  [ee511, "lecture"],
  [naut301, "lecture"]
];
const tues = [
  [ee557, "lecture"],
  [csci431, "lecture"]
];
const wed = [
  [writ340, "lecture"],
  [ee511, "lecture"]
];
const thurs = [
  [ee557, "lecture"],
  [csci431, "lecture"]
];
const fri = [
  [ee557, "discussion"],
  [ee511, "discussion"]
];
---

<div class="content">
  <div class="left">
    <Card title="Quick Links" sections={quicklinks} />
  </div>
  <div class="right">
    <div class="mon day">
      <Day title="Monday" classes={mon} />
    </div>
    <div class="tues day">
      <Day title="Tuesday" classes={tues} />
    </div>
    <div class="wed day">
      <Day title="Wednesday" classes={wed} />
    </div>
    <div class="thurs day">
      <Day title="Thursday" classes={thurs} />
    </div>
    <div class="fri day">
      <Day title="Friday" classes={fri} />
    </div>
  </div>
</div>

<style lang="scss">
  .content {
    display: flex;
    flex-flow: row wrap;
    gap: 32px;
  }

  .day {
    display: none;
  }

  .left,
  .right {
    flex: 1;
    min-width: 270px;

    display: flex;
    flex-direction: column;
    gap: 32px;
  }
</style>

<script>
  const days = ["mon", "tues", "wed", "thurs", "fri", "sat"];

  const show = (classname) => {
    const elements = document.getElementsByClassName(classname);
    Array.from(elements).forEach((day) => (day.style.display = "block"));
  };

  const showAll = () => days.forEach((day) => show(day));

  const setDisplay = (day) => show(days[day - 1]);

  let currDate = new Date();
  setDisplay(currDate.getDay());

  let shown = false;

  const showButton = document.getElementById("show-all");
  showButton.addEventListener("click", () => {
    if (shown) {
      const allDays = document.getElementsByClassName("day");
      Array.from(allDays).forEach((day) => (day.style.display = "none"));
      setDisplay(currDate.getDay());
      showButton.innerText = "Show all";
    } else {
      showAll();
      showButton.innerText = "Show today";
    }
    shown = !shown;
  });
</script>
